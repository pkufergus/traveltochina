search=(typeof search=="undefined")?{}:search;search.PassengerList=function(form){this._form=form;this._totalNumOfType=0;this._totalNumOfPax=0;this._totalNumOfInf=0;this._totalNumOfChd=0;this._errors=[];};search.PassengerList.prototype.resetNumOfHiddenPax=function(){this.initializeHiddenField(this._form.FIELD_YTH_NUMBER);this.initializeHiddenField(this._form.FIELD_CHD_NUMBER);this.initializeHiddenField(this._form.FIELD_CMP_NUMBER);this.initializeHiddenField(this._form.FIELD_YCD_NUMBER);this.initializeHiddenField(this._form.FIELD_STU_NUMBER);this.initializeHiddenField(this._form.FIELD_MIL_NUMBER);this.initializeHiddenField(this._form.FIELD_GVT_NUMBER);this.initializeHiddenField(this._form.FIELD_SPS_NUMBER);this.initializeHiddenField(this._form.FIELD_QHH_NUMBER);return;};search.PassengerList.prototype.initializeHiddenField=function(field){var cmp=this._getContainer(field);if(cmp&&(cmp.style.visibility=="hidden"||cmp.style.display=="none")){field.value="0";}};search.PassengerList.prototype.check=function(){this._totalNumOfType=0;this._totalNumOfPax=0;this._errors=[];this.getNumOfPaxType(this._form.FIELD_ADT_NUMBER);this.getNumOfPaxType(this._form.FIELD_CHD_NUMBER);this.getNumOfPaxType(this._form.FIELD_CMP_NUMBER);this.getNumOfPaxType(this._form.FIELD_YTH_NUMBER);this.getNumOfPaxType(this._form.FIELD_YCD_NUMBER);this.getNumOfPaxType(this._form.FIELD_STU_NUMBER);this.getNumOfPaxType(this._form.FIELD_GVT_NUMBER);this.getNumOfPaxType(this._form.FIELD_MIL_NUMBER);this.getNumOfPaxType(this._form.FIELD_SPS_NUMBER);this.getNumOfPaxType(this._form.FIELD_QHH_NUMBER);this.getNumOfPaxType(this._form.FIELD_INFANTS_NUMBER);this.getNumOfPaxType(this._form.FIELD_NO_PAX_LABEL_NUMBER);var maxPax=parseInt(WDSCommon.getTagValue(this._form,"MAX_PAX_VALUE"));var maxPaxTypes=parseInt(WDSCommon.getTagValue(this._form,"MAX_PAX_TYPES_VALUE"));var obj=this._form.FIELD_ADT_NUMBER;if(!obj){obj=this._form.FIELD_NO_PAX_LABEL_NUMBER;}if(this._totalNumOfType>maxPaxTypes){this._errors.push({"msg":WDSMessage.getMessage(5125),"number":5125,"obj":obj,"type":"E","isInPanel":true});}if(this._totalNumOfPax>maxPax){this._errors.push({"msg":this.templateReplace(WDSMessage.getMessage(5118),[maxPax]),"obj":obj,"type":"E","isInPanel":true});}var adtNum=eval(this._totalNumOfPax-this._totalNumOfChd);if(this._totalNumOfChd>0&&adtNum==0){obj=eval(this._form.FIELD_CHD_NUMBER);this._errors.push({"msg":WDSMessage.getMessage(5122),"number":5122,"obj":obj,"type":"E","isInPanel":true});}if(this._totalNumOfInf>0&&(adtNum<=0)){obj=eval(this._form.FIELD_INFANTS_NUMBER);this._errors.push({"msg":WDSMessage.getMessage(5124),"number":5124,"obj":obj,"type":"E","isInPanel":true});}if((adtNum>0)&&(adtNum<this._totalNumOfInf)){this._errors.push({"msg":WDSMessage.getMessage(5121),"number":5121,"obj":obj,"type":"E","isInPanel":true});}if(this._totalNumOfPax+this._totalNumOfInf==0){this._errors.push({"msg":WDSMessage.getMessage(5123),"number":5123,"obj":obj,"type":"E","isInPanel":true});}if(this._totalNumOfPax>0&&this._form.FIELD_ADT_NUMBER){var nbADT=this.giveNumOfPaxType(this._form.FIELD_ADT_NUMBER);var svgNbADT=nbADT;var allowPrimADT=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_ADT);if(!allowPrimADT){nbADT=0;}var nbCHD=this.giveNumOfPaxType(this._form.FIELD_CHD_NUMBER);var svgNbCHD=nbCHD;var allowPrimCHD=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_CHD);if(!allowPrimCHD){nbCHD=0;}var nbCMP=this.giveNumOfPaxType(this._form.FIELD_CMP_NUMBER);var svgNbCMP=nbCMP;var allowPrimCMP=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_CMP);if(!allowPrimCMP){nbCMP=0;}var nbYTH=this.giveNumOfPaxType(this._form.FIELD_YTH_NUMBER);var svgNbYTH=nbYTH;var allowPrimYTH=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_YTH);if(!allowPrimYTH){nbYTH=0;}var nbYCD=this.giveNumOfPaxType(this._form.FIELD_YCD_NUMBER);var svgNbYCD=nbYCD;var allowPrimYCD=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_YCD);if(!allowPrimYCD){nbYCD=0;}var nbSTU=this.giveNumOfPaxType(this._form.FIELD_STU_NUMBER);var svgNbSTU=nbSTU;var allowPrimSTU=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_STU);if(!allowPrimSTU){nbSTU=0;}var nbGVT=this.giveNumOfPaxType(this._form.FIELD_GVT_NUMBER);var svgNbGVT=nbGVT;var allowPrimGVT=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_GVT);if(!allowPrimGVT){nbGVT=0;}var nbMIL=this.giveNumOfPaxType(this._form.FIELD_MIL_NUMBER);var svgNbMIL=nbMIL;var allowPrimMIL=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_MIL);if(!allowPrimMIL){nbMIL=0;}var nbSPS=this.giveNumOfPaxType(this._form.FIELD_SPS_NUMBER);var svgNbSPS=nbSPS;var allowPrimSPS=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_SPS);if(!allowPrimSPS){nbSPS=0;}var nbQHH=this.giveNumOfPaxType(this._form.FIELD_QHH_NUMBER);var svgNbQHH=nbQHH;var allowPrimQHH=this.givePrimaryPaxType(this._form.ALLOW_PRIMARY_QHH);if(!allowPrimQHH){nbQHH=0;}if(nbADT+nbCHD+nbCMP+nbYTH+nbYCD+nbSTU+nbGVT+nbMIL+nbSPS+nbQHH==0){this._errors.push({"msg":WDSMessage.getMessage(5126),"number":5126,"type":"E","isInPanel":true});if(svgNbADT>0){this._errors.push({"obj":this._form.FIELD_ADT_NUMBER,"type":"E","isInPanel":false});}if(svgNbCHD>0){this._errors.push({"obj":this._form.FIELD_CHD_NUMBER,"type":"E","isInPanel":false});}if(svgNbCMP>0){this._errors.push({"obj":this._form.FIELD_CMP_NUMBER,"type":"E","isInPanel":false});}if(svgNbYTH>0){this._errors.push({"obj":this._form.FIELD_YTH_NUMBER,"type":"E","isInPanel":false});}if(svgNbYCD>0){this._errors.push({"obj":this._form.FIELD_YCD_NUMBER,"type":"E","isInPanel":false});}if(svgNbSTU>0){this._errors.push({"obj":this._form.FIELD_STU_NUMBER,"type":"E","isInPanel":false});}if(svgNbGVT>0){this._errors.push({"obj":this._form.FIELD_GVT_NUMBER,"type":"E","isInPanel":false});}if(svgNbMIL>0){this._errors.push({"obj":this._form.FIELD_MIL_NUMBER,"type":"E","isInPanel":false});}if(svgNbSPS>0){this._errors.push({"obj":this._form.FIELD_SPS_NUMBER,"type":"E","isInPanel":false});}if(svgNbQHH>0){this._errors.push({"obj":this._form.FIELD_QHH_NUMBER,"type":"E","isInPanel":false});}}}};search.PassengerList.prototype.getErrors=function(){return this._errors;};search.PassengerList.prototype.getAriaErrors=function(){var ariaErrors=[];for(var i=0;i<this._errors.length;i++){var error=this._errors[i];if(error.isInPanel){var ariaError={};ariaError.message=error.msg;ariaError.type=error.type;ariaError.nb=error.number;if(error.obj){ariaError.bind=error.obj.id;}ariaErrors.push(ariaError);}}return ariaErrors;};search.PassengerList.prototype.updateWDSErrors=function(){for(var i=0;i<this._errors.length;i++){var error=this._errors[i];var message="";if(error.msg){message=error.msg;}WDSError.add(message,error.obj,error.type,error.isInPanel);}};search.PassengerList.prototype.givePrimaryPaxType=function(type){var obj=eval(type);var val="N";if(obj){val=WDSCommon.getTagValue(obj);}return(val=="Y");};search.PassengerList.prototype.giveNumOfPaxType=function(type){var obj=eval(type);if(obj){return eval(WDSCommon.getTagValue(obj));}else{return 0;}};search.PassengerList.prototype.getNumOfPaxType=function(type){var num=0;var obj=eval(type);if(obj){num=eval(WDSCommon.getTagValue(obj));if(num>0){this._totalNumOfType+=1;}if(obj.name!="FIELD_INFANTS_NUMBER"){this._totalNumOfPax+=num;}if(obj.name=="FIELD_INFANTS_NUMBER"){this._totalNumOfInf=num;}if(obj.name=="FIELD_CHD_NUMBER"){this._totalNumOfChd=num;}}};search.PassengerList.prototype.getPassengerList=function(){var adt=this._form.FIELD_ADT_NUMBER;if(!adt){adt=this._form.FIELD_NO_PAX_LABEL_NUMBER;}var adtNum=this.giveNumOfPaxType(adt);var chdNum=this.giveNumOfPaxType(this._form.FIELD_CHD_NUMBER);var cmpNum=this.giveNumOfPaxType(this._form.FIELD_CMP_NUMBER);var ythNum=this.giveNumOfPaxType(this._form.FIELD_YTH_NUMBER);var ycdNum=this.giveNumOfPaxType(this._form.FIELD_YCD_NUMBER);var stuNum=this.giveNumOfPaxType(this._form.FIELD_STU_NUMBER);var gvtNum=this.giveNumOfPaxType(this._form.FIELD_GVT_NUMBER);var milNum=this.giveNumOfPaxType(this._form.FIELD_MIL_NUMBER);var spsNum=this.giveNumOfPaxType(this._form.FIELD_SPS_NUMBER);var qhhNum=this.giveNumOfPaxType(this._form.FIELD_QHH_NUMBER);var infNum=this.giveNumOfPaxType(this._form.FIELD_INFANTS_NUMBER);var listPassengers=[];for(var i=0;i<adtNum;i++){listPassengers.push("ADT");}for(var i=0;i<chdNum;i++){listPassengers.push("CHD");}for(var i=0;i<cmpNum;i++){listPassengers.push("CMP");}for(var i=0;i<ythNum;i++){listPassengers.push("YTH");}for(var i=0;i<ycdNum;i++){listPassengers.push("YCD");}for(var i=0;i<stuNum;i++){listPassengers.push("STU");}for(var i=0;i<gvtNum;i++){listPassengers.push("GVT");}for(var i=0;i<milNum;i++){listPassengers.push("MIL");}for(var i=0;i<spsNum;i++){listPassengers.push("SPS");}for(var i=0;i<qhhNum;i++){listPassengers.push("QHH");}var numberOfInf=Math.min(listPassengers.length,infNum);for(var i=0;i<numberOfInf;i++){listPassengers.push("INF");}return listPassengers;};search.PassengerList.prototype.templateReplace=function(template,params){var result=template;for(i=0;i<params.length;i++){result=result.replace("{"+i+"}",params[i]);}return result;};search.PassengerList.prototype._getContainer=function(field){if(!field||!field.parentNode){return null;}var parent=field;var maxNbIterations=2;var compteur=0;while(compteur<maxNbIterations){parent=parent.parentNode;var isPassengerContainer=parent.getAttribute("_isPassengerContainer");if(isPassengerContainer=="true"){return parent;}compteur++;}return null;};search.PassengerList.prototype.applySearchFlow=function(searchFlow){var visible=["visible",""];var hidden=["hidden","none"];var militaryDisplay=visible;var governmentDisplay=visible;var spouseDisplay=visible;var studentFRDisplay=visible;if(searchFlow=="FP"){militaryDisplay=hidden;governmentDisplay=hidden;spouseDisplay=hidden;studentFRDisplay=hidden;}this._applyStyle(this._getContainer(this._form.FIELD_MIL_NUMBER),militaryDisplay);this._applyStyle(this._getContainer(this._form.FIELD_GVT_NUMBER),governmentDisplay);this._applyStyle(this._getContainer(this._form.FIELD_SPS_NUMBER),spouseDisplay);this._applyStyle(this._getContainer(this._form.FIELD_QHH_NUMBER),studentFRDisplay);};search.PassengerList.prototype._applyStyle=function(cmp,displayType){if(cmp!=null){cmp.style.visibility=displayType[0];if(navigator.userAgent.toLowerCase().indexOf("opera 8")!=-1){cmp.style.display="";if(displayType[0]=="visible"){cmp.style.height="";}else{cmp.style.height="0px";}}else{cmp.style.height="";cmp.style.display=displayType[1];}}};